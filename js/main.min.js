// ABOUT US IMAGES ARE LISTED BELOW
var img1Array = ['images/gallery-about/about-1-1.jpg','images/gallery-about/about-1-2.jpg','images/gallery-about/about-1-3.jpg'],
	img2Array = ['images/gallery-about/about-2-1.jpg','images/gallery-about/about-2-2.jpg','images/gallery-about/about-2-3.jpg'],
	img3Array = ['images/gallery-about/about-3-1.jpg','images/gallery-about/about-3-2.jpg','images/gallery-about/about-3-3.jpg'];

function pageOneCycle(a){function h(){setTimeout(function(){e<b.length-1?e+=1:e=0,$("#page-1-theatrical").append("<img src='"+b[e]+"' class='project-img' style='display:none'>"),$("#page-1-theatrical > img:last").fadeTo(1500,1,function(){$("#page-1-theatrical > img:first").remove()}),i()},3e3)}function i(){setTimeout(function(){f<c.length-1?f+=1:f=0,$("#page-1-homeEnt").append("<img src='"+c[f]+"' class='project-img' style='display:none'>"),$("#page-1-homeEnt img:last").fadeTo(1500,1,function(){$("#page-1-homeEnt > img:first").remove()}),j()},3e3)}function j(){setTimeout(function(){g<d.length-1?g+=1:g=0,$("#page-1-gaming").append("<img src='"+d[g]+"' class='project-img' style='display:none'>"),$("#page-1-gaming img:last").fadeTo(1500,1,function(){$("#page-1-gaming > img:first").remove()}),h()},3e3)}var b=[],c=[],d=[],e=0,f=0,g=0;_.each(a,function(a){switch(a.projectType){case"Theatrical":b.push(a.mainImg);break;case"Home Entertainment":c.push(a.mainImg);break;case"Interactive Gaming":d.push(a.mainImg)}}),$("#page-1-theatrical > img").attr("src",b[0]),$("#page-1-homeEnt > img").attr("src",c[0]),$("#page-1-gaming > img").attr("src",d[0]),h()}function aboutUsCycle(){function d(){setTimeout(function(){a<img1Array.length-1?a+=1:a=0,$("#about-img-one").append("<img src='"+img1Array[a]+"' style='display:none'>"),$("#about-img-one img:last-child").fadeTo(1500,1,function(){$("#about-img-one img:first").remove()}),e()},3e3)}function e(){setTimeout(function(){b<img2Array.length-1?b+=1:b=0,$("#about-img-two").append("<img src='"+img2Array[b]+"' style='display:none'>"),$("#about-img-two img:last-child").fadeTo(1500,1,function(){$("#about-img-two img:first").remove()}),f()},3e3)}function f(){setTimeout(function(){c<img3Array.length-1?c+=1:c=0,$("#about-img-three").append("<img src='"+img3Array[c]+"' style='display:none'>"),$("#about-img-three img:last-child").fadeTo(1500,1,function(){$("#about-img-three img:first").remove()}),d()},3e3)}var a=0,b=0,c=0;$("#about-img-one").children("img").attr("src",img1Array[0]),$("#about-img-two").children("img").attr("src",img2Array[0]),$("#about-img-three").children("img").attr("src",img3Array[0]),d()}var pageMeasure={$height:$(window).height(),$bottom:0};$(document).ready(function(){aboutUsCycle(),$("#content-wrapper").css("display","block"),$(window).height()>580?($("#page-1").css({height:$(window).height(),width:$(window).width()}),$("#portfolio").css({minHeight:$(window).height(),width:$(window).width()}),$("#about-us").css({height:$(window).height(),width:$(window).width()})):($("#page-1").css({height:"580px",width:$(window).width()}),$("#portfolio").css({minHeight:"580px",width:$(window).width()}),$("#about-us").css({height:"580px",width:$(window).width()})),$("nav").on("click touchstart",".nav-icon",function(a){a.preventDefault();var b=$(a.target).attr("rel");return $("html, body").stop().animate({scrollTop:$(b).offset().top},1e3,"easeOutCubic"),!1}),$("body").on("click doubletap","#page-1-theatrical, #page-1-homeEnt, #page-1-gaming, #crp-logo",function(){return thisTop=$(window).width()>767?"nav":"#portfolio",$("html, body").stop().animate({scrollTop:$(thisTop).offset().top},1e3,"easeOutCubic"),!1});var a,b;$.getJSON("source/masterProjectList.json",function(c){b=parseInt(c[c.length-1].id),a=new d(c),new h,new g,pageOneCycle(c)});var c=Backbone.Model.extend({defaults:{}}),d=Backbone.Collection.extend({model:c}),e=Backbone.View.extend({tagName:"div",className:"model-wrap",events:{"click .close-button":"closeModel","touchstart .close-button":"closeModel","click .model-left-arrow":"pageLeft","touchstart .model-left-arrow":"pageLeft","click .model-right-arrow":"pageRight","touchstart .model-right-arrow":"pageRight","click .poster, .videoClicker":"clickToPlayVideo","touchstart .poster, .videoClicker":"clickToPlayVideo"},initialize:function(){this.template=_.template($(this.options.templ).html())},render:function(){return $("#model-mask").on("click touchstart",this.closeModel),this.$el.html(this.template(this.model.toJSON())),this},closeModel:function(){return $(".model-frame").fadeOut("500"),$("#model-mask").fadeOut("500"),!1},pageLeft:function(){var a=this.$el.find(".model-frame"),c=parseInt(a.attr("rel"));return 1===c?(c=b,$('.model-frame[rel="'+c+'"]').fadeIn("1500",function(){$(a).hide()})):(c--,$('.model-frame[rel="'+c+'"]').show(),$(a).fadeOut("1500")),this.pauseVideos(),!1},pageRight:function(){var a=this.$el.find(".model-frame"),c=parseInt(a.attr("rel"));return c===b?(c=1,$('.model-frame[rel="'+c+'"]').show(),$(a).fadeOut("1500")):(c++,$('.model-frame[rel="'+c+'"]').fadeIn("1500",function(){$(a).hide()})),this.pauseVideos(),!1},pauseVideos:function(){$("video").each(function(){this.paused||this.pause()})},clickToPlayVideo:function(a){var b=$(a.target),c=b.hasClass("fullArt")?b:b.parent(),d=c.parent().find(".video");return c.hasClass("poster")?(c.css({display:"none"}),d.css({display:"block"}),d.children().get(1).play()):c.hasClass("video")&&!d.children().get(1).paused?d.children().get(1).pause():d.children().get(1).play(),!1}}),f=Backbone.View.extend({tagName:"div",className:"project-wrap",initialize:function(){this.template=_.template($("#projectTemplate").html())},render:function(){return this.$el.html(this.template(this.model.toJSON())),this},events:{"click .theatrical-box, .homeEnt-box, .gaming-box":"openModel","doubletap .theatrical-box, .homeEnt-box, .gaming-box":"openModel"},openModel:function(){var a=this.$el.find("div").attr("rel");return $("#model-mask").fadeIn("800"),$('.model-frame[rel="'+a+'"]').fadeIn("800"),!1}}),g=Backbone.View.extend({el:"#modelList",initialize:function(){this.collection=a,this.render()},render:function(){this.$el.html(""),this.collection.each(function(a){this.renderItem(a)},this)},renderItem:function(a){var b=a.get("video");if("true"==b){var c=new e({model:a,templ:"#videoProjectModel"});this.$el.append(c.render().el)}else{var c=new e({model:a,templ:"#projectModel"});this.$el.append(c.render().el)}}}),h=Backbone.View.extend({el:"#projectList",initialize:function(){this.collection=a,this.render()},render:function(){this.$el.html(""),this.collection.each(function(a){this.renderItem(a)},this)},renderItem:function(a){var b=new f({model:a});this.$el.append(b.render().el)}})}),$(window).scroll(function(){if(!pageMeasure.$bottom){var a=document.body,b=document.documentElement;pageMeasure.$bottom=Math.max(a.scrollHeight,a.offsetHeight,b.clientHeight,b.scrollHeight,b.offsetHeight)-(pageMeasure.$height+300)}var c=$(window).scrollTop();c>pageMeasure.$height-1?($("nav").css({position:"fixed",top:"0px"}),$("#projectList").css({marginTop:"90px"})):($("nav").css({position:"relative"}),$("#projectList").css({marginTop:"40px"})),c>pageMeasure.$height-100&&c<pageMeasure.$bottom?($("#about-link").css({"border-bottom":"0px"}),$("#port-link").last().css({"border-bottom":"3px solid #488ee7"})):c<=pageMeasure.$height?($("#about-link").css({"border-bottom":"0px"}),$("#port-link").css({"border-bottom":"0px"})):c>=pageMeasure.$bottom&&($("#about-link").css({"border-bottom":"3px solid #488ee7"}),$("#port-link").css({"border-bottom":"0px"}))}),$(window).resize(function(){var a=$(window).width(),b=$(window).height(),c=580;c=1025>a?420:c,$(window).height()>c?($("#page-1").css({height:b,width:a}),$("#portfolio").css({width:a}),$("#about-us").css({height:b,width:a})):($("#page-1").css({height:"580px",width:a}),$("#portfolio").css({minHeight:"580px",width:a}),$("#about-us").css({height:"580px",width:a})),pageMeasure.$height=b;var d=document.body,e=document.documentElement;pageMeasure.$bottom=Math.max(d.scrollHeight,d.offsetHeight,e.clientHeight,e.scrollHeight,e.offsetHeight)-(pageMeasure.$height+300)});